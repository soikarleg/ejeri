!function(){"use strict";function e(e,r,s){fetch(r,{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.text();throw Error(`${e.status} ${e.statusText} ${e.url}`)}).then(t=>{if(e.querySelector(".loading").classList.remove("d-block"),"1"===t.trim())e.querySelector(".sent-message").classList.add("d-block"),e.reset();else throw Error(t||"Envoi du message impossible. Pas de message d'erreur : "+r)}).catch(r=>{t(e,r)})}function t(e,t){e.querySelector(".loading").classList.remove("d-block"),e.querySelector(".error-message").innerHTML=":)"+t,e.querySelector(".error-message").classList.add("d-block")}document.querySelectorAll(".php-email-form").forEach(function(r){r.addEventListener("submit",function(r){r.preventDefault();let s=this,o=s.getAttribute("action"),a=s.getAttribute("data-recaptcha-site-key");if(!o){t(s,"The form action property is not set!");return}s.querySelector(".loading").classList.add("d-block"),s.querySelector(".error-message").classList.remove("d-block"),s.querySelector(".sent-message").classList.remove("d-block");let c=new FormData(s);a?"undefined"!=typeof grecaptcha?grecaptcha.ready(function(){try{grecaptcha.execute(a,{action:"php_email_form_submit"}).then(t=>{c.set("recaptcha-response",t),e(s,o,c)})}catch(r){t(s,r)}}):t(s,"The reCaptcha javascript API url is not loaded!"):e(s,o,c)})})}();